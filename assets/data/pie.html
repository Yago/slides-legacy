
<!--
<iframe src="/data/pie.html?data=test.csv" width="425px" height="425px" style="margin:0 auto;display:block;" frameborder="0"></iframe>
-->

<!DOCTYPE html>
<meta charset="utf-8">
<body>
<style>
@import url(http://fonts.googleapis.com/css?family=Roboto:400,900,400italic,900italic,300,300italic);
body {
  font-family: "Roboto", Helvetica, Arial, sans-serif;
  font-size: 20px;
}
.arc path {stroke: #fff;}
</style>
<script src="../js/vendors.min.js"></script>
<script>
    function getParameterByName(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
            results = regex.exec(location.search);
        return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
    }

    var width = 400,
        height = 400,
        radius = Math.min(width, height) / 2;

    var color = d3.scale.ordinal()
        .range(["#4A89DC", "#3BAFDA", "#37BC9B", "#8CC152", "#F6BB42", "#E9573F", "#DA4453", "#967ADC", "#D770AD", "#434A54"]);

    var arc = d3.svg.arc()
        .outerRadius(radius - 10)
        .innerRadius(0);

    var pie = d3.layout.pie()
        .sort(null)
        .value(function(d) { return d.col2; });

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height)
      .append("g")
        .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

    d3.csv(getParameterByName('data'), function(error, data) {

      data.forEach(function(d) {
        d.col2 = +d.col2;
      });

      var g = svg.selectAll(".arc")
          .data(pie(data))
        .enter().append("g")
          .attr("class", "arc");

      g.append("path")
          .attr("d", arc)
          .style("fill", function(d) { return color(d.data.col1); });

      g.append("text")
          .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
          .attr("dy", ".35em")
          .attr("fill", "white")
          .style("text-anchor", "middle")
          .text(function(d) { return d.data.col1; });

    });

</script>